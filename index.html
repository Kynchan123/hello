<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Hello?</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="container" id="box">
  <img id="cuteImg" src="images/hello.gif" width="200" />
  <h2 id="text">Hi there! ğŸ’•</h2>
  <div id="buttons">
    <button onclick="askName()">Hello!</button>
  </div>

  <audio id="valentineMusic">
    <source src="her.mp3" type="audio/mpeg">
  </audio>
</div>

<script>
let userName = "";
const text = document.getElementById("text");
const buttons = document.getElementById("buttons");
const box = document.getElementById("box");
const img = document.getElementById("cuteImg");

/* ================= STEP 1: Ask Name ================= */
function askName() {
  img.src = "images/hello.gif";
  text.innerText = "Whatâ€™s your name? ğŸ’Œ";
  buttons.innerHTML = `
    <input type="text" id="nameInput" placeholder="Enter your name..." />
    <br>
    <button type="button" onclick="saveName()">Continue ğŸ’•</button>
  `;
  document.getElementById("nameInput").focus();
}

/* ================= STEP 2: Save Name ================= */
function saveName() {
  const input = document.getElementById("nameInput");
  userName = input.value.trim();
  if (userName === "") { alert("Heyyy ğŸ˜³ tell me your name!"); return; }
  nextStep();
}

/* ================= STEP 3: Important Question ================= */
function nextStep() {
  img.src = "images/hmm.gif";
  text.innerText = `Okay ${userName}â€¦ I have an important question ğŸ˜³`;
  buttons.innerHTML = `<button onclick="askValentine()">Okay ğŸ’•</button>`;
}

/* ================= STEP 4: Valentine Question ================= */
function askValentine() {
  img.src = "images/cat.gif";
  text.innerText = `Will you be my Valentine, ${userName}? ğŸ’–`;
  buttons.innerHTML = `
    <button class="yes" onclick="yesAnswer()">Yes ğŸ’˜</button>
    <button class="no" id="noBtn">No ğŸ˜…</button>
  `;

  const noBtn = document.getElementById("noBtn");
  noBtn.addEventListener("mouseover", () => {
    const boxRect = box.getBoundingClientRect();
    const x = Math.random() * (boxRect.width - noBtn.offsetWidth);
    const y = Math.random() * (boxRect.height - noBtn.offsetHeight);
    noBtn.style.left = x + "px";
    noBtn.style.top = y + "px";
  });
}

/* ================= Hearts ================= */
function spawnHeart() {
  const heart = document.createElement("div");
  heart.className = "heart";
  heart.innerText = "ğŸ’–";
  heart.style.left = Math.random() * 100 + "vw";
  document.body.appendChild(heart);
  setTimeout(() => heart.remove(), 4000);
}

/* ================= Flowers ================= */
function spawnFlower() {
  const flowers = ["ğŸŒ¸","ğŸŒ¼","ğŸŒ·","ğŸŒº","ğŸ’"];
  const flower = document.createElement("div");
  flower.className = "flower";
  flower.innerText = flowers[Math.floor(Math.random()*flowers.length)];
  flower.style.left = Math.random()*100+"vw";
  flower.style.animationDuration = (6+Math.random()*4)+"s";
  flower.style.fontSize = (20+Math.random()*20)+"px";
  document.body.appendChild(flower);
  setTimeout(()=>flower.remove(),9000);
}

/* ================= Build Valentine Background ================= */
function buildBackground() {
  if (!document.querySelector(".valentine-bg")) {
    let building = document.createElement("div");
    building.className = "valentine-bg";
    document.body.appendChild(building);
    setTimeout(()=>{ building.classList.add("show"); },50);
  }
}

/* ================= STEP 5: YES ================= */
function yesAnswer() {
  img.src = "images/IMG_1561.JPG";
  text.innerText = `YAY!! ğŸ’•ğŸ¥° Happy Valentineâ€™s Day, ${userName}!`;
  buttons.innerHTML = "";

  // 1ï¸âƒ£ Build the flower building
  buildBackground();

  // 2ï¸âƒ£ Play music
  const music = document.getElementById("valentineMusic");
  music.volume = 0.7;
  music.play();

  // 3ï¸âƒ£ Spawn hearts
  const heartInterval = setInterval(spawnHeart,150);
  setTimeout(()=>clearInterval(heartInterval),4000);

  // 4ï¸âƒ£ Spawn flowers
  const flowerInterval = setInterval(spawnFlower,300);
  setTimeout(()=>clearInterval(flowerInterval),6000);

  // 5ï¸âƒ£ Send notification (Discord example)
  fetch("https://discord.com/api/webhooks/1469876462894055529/woDuIbAe11VWb-K-T0dt07yUL0bpdl7CHWjZqHK7FeKlLIsNi7ZiagzC3RG3dj4DbMZu", {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({content:`ğŸ’– ${userName} said YES to being your Valentine!`})
  });
}
</script>

</body>
</html>
