<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Hello?</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="container" id="box">
    <img id="cuteImg" src="images/hello.gif" width="200" />
    <h2 id="text">Hi there! ðŸ’•</h2>

    <div id="buttons">
      <button onclick="askName()">Hello!</button>
    </div>

    <audio id="valentineMusic">
      <source src="her.mp3" type="audio/mpeg">
    </audio>
  </div>

<script>
  let userName = "";

  const text = document.getElementById("text");
  const buttons = document.getElementById("buttons");
  const box = document.getElementById("box");
  const img = document.getElementById("cuteImg");

  // STEP 1: Ask for name
  function askName() {
    img.src = "images/hello.gif";
    text.innerText = "Whatâ€™s your name? ðŸ’Œ";
    buttons.innerHTML = `
      <input type="text" id="nameInput" placeholder="Enter your name..." />
      <br>
      <button type="button" onclick="saveName()">Continue ðŸ’•</button>
    `;

    document.getElementById("nameInput").focus();
  }

  // STEP 2: Save name
  function saveName() {
    const input = document.getElementById("nameInput");
    userName = input.value.trim();

    if (userName === "") {
      alert("Heyyy ðŸ˜³ tell me your name!");
      return;
    }

    nextStep();
  }

  // STEP 3: Important question
  function nextStep() {
    img.src = "images/hmm.gif";
    text.innerText = `Okay ${userName}â€¦ I have an important question ðŸ˜³`;
    buttons.innerHTML = `<button onclick="askValentine()">Okay ðŸ’•</button>`;
  }

  // STEP 4: Valentine question
  function askValentine() {
    img.src = "images/cat.gif";
    text.innerText = `Will you be my Valentine, ${userName}? ðŸ’–`;
    buttons.innerHTML = `
      <button class="yes" onclick="yesAnswer()">Yes ðŸ’˜</button>
      <button class="no" id="noBtn">No ðŸ˜…</button>
    `;

    const noBtn = document.getElementById("noBtn");

    noBtn.addEventListener("mouseover", () => {
      const boxRect = box.getBoundingClientRect();
      const x = Math.random() * (boxRect.width - noBtn.offsetWidth);
      const y = Math.random() * (boxRect.height - noBtn.offsetHeight);

      noBtn.style.left = x + "px";
      noBtn.style.top = y + "px";
    });
  }

  // HEART SPAWNER
  function spawnHeart() {
    const heart = document.createElement("div");
    heart.className = "heart";
    heart.innerText = "ðŸ’–";
    heart.style.left = Math.random() * 100 + "vw";
    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 4000);
  }

  // STEP 5: YES ðŸ’–
  function yesAnswer() {
    img.src = "images/IMG_1561.JPG";
    text.innerText = `YAY!! ðŸ’•ðŸ¥° Happy Valentineâ€™s Day, ${userName}!`;
    buttons.innerHTML = "";

    const music = document.getElementById("valentineMusic");
    music.volume = 0.7;
    music.play();

    const heartInterval = setInterval(spawnHeart, 150);
    setTimeout(() => clearInterval(heartInterval), 4000);

    // Discord notification
    fetch("https://discord.com/api/webhooks/1469876462894055529/woDuIbAe11VWb-K-T0dt07yUL0bpdl7CHWjZqHK7FeKlLIsNi7ZiagzC3RG3dj4DbMZu", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        content: `ðŸ’– ${userName} said YES to being your Valentine!`
      })
    });
  }
</script>

</body>
</html>
