<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Hello?</title>
  <link rel="stylesheet" href="style.css">
  
</head>

<body>
  <div class="container" id="box">
    <img id="cuteImg" src="images/hello.gif" width="200" />
    <h2 id="text">Hi there! ðŸ’•</h2>
    <div id="buttons">
      <button onclick="askName()">Hello!</button>
    </div>

    <audio id="valentineMusic">
      <source src="her.mp3" type="audio/mpeg">
    </audio>
  </div>

<script>
/* ========== GLOBALS ========== */
let userName = "";
let trollIndex = 0;
let noClicks = 0;
let noClicksSent = false;

const text = document.getElementById("text");
const buttons = document.getElementById("buttons");
const box = document.getElementById("box");
const img = document.getElementById("cuteImg");

/* ========== TROLL QUESTIONS ========== */
const trolls = [
  { img: "images/200.gif", text: "If youâ€™re waiting for the waiter, arenâ€™t you the waiter? ðŸ˜³", buttons: `<button onclick="nextTroll()">Yes</button><button onclick="nextTroll()">No</button>` },
  { img: "images/lmao.gif", text: "Ok, serious question.", buttons: `<button onclick="nextTroll()">Okay</button>` },
  { img: "images/hm.gif", text: "If you clean a vacuum cleanerâ€¦ does it become a vacuum cleaner cleaner? ðŸ˜³", buttons: `<button onclick="nextTroll()">Yes</button><button onclick="nextTroll()">No</button>` },
  { img: "images/wait.gif", text: "Ok wait waittttâ€¦", buttons: `<button onclick="askValentine()">Okay</button>` }
];

/* ========== STEP 1: ASK NAME ========== */
function askName() {
  noClicks = 0;
  noClicksSent = false;
  img.src = "images/hello.gif";
  text.innerText = "Whatâ€™s your name? ðŸ’Œ";
  buttons.innerHTML = `
    <input id="nameInput" placeholder="Enter your name..." />
    <br>
    <button onclick="saveName()">Continue ðŸ’•</button>
  `;
  document.getElementById("nameInput").focus();
}

/* ========== STEP 2: SAVE NAME ========== */
function saveName() {
  const input = document.getElementById("nameInput");
  userName = input.value.trim();
  if (!userName) { alert("Heyyy ðŸ˜³ tell me your name!"); return; }
  introQuestion();
}

/* ========== STEP 3: INTRO ========== */
function introQuestion() {
  trollIndex = 0;
  img.src = "images/hmm.gif";
  text.innerText = `Okay ${userName}â€¦ I have an important question ðŸ˜³`;
  buttons.innerHTML = `<button onclick="showTroll()">Okay ðŸ’•</button>`;
}

/* ========== STEP 4: TROLL FLOW ========== */
function showTroll() {
  const step = trolls[trollIndex];
  img.src = step.img;
  text.innerHTML = step.text;
  buttons.innerHTML = step.buttons;
}

function nextTroll() {
  trollIndex++;
  if (trollIndex >= trolls.length) {
    askValentine();
  } else {
    showTroll();
  }
}

/* ========== STEP 5: VALENTINE ========== */
function askValentine() {
  img.src = "images/cat.gif";
  text.innerText = `Will you be my Valentine, ${userName}? ðŸ’–`;
  buttons.innerHTML = `
    <button class="yes" onclick="yesAnswer()">Yes ðŸ’˜</button>
    <button class="no" id="noBtn">No ðŸ˜…</button>
  `;
  const noBtn = document.getElementById("noBtn");
  noBtn.addEventListener("mouseover", moveNoButton);
}

/* ========== NO BUTTON ESCAPE + DISCORD ALERT ========== */
function moveNoButton(e) {
  const btn = e.target;
  const rect = box.getBoundingClientRect();
  btn.style.position = "absolute";
  btn.style.left = Math.random() * (rect.width - btn.offsetWidth) + "px";
  btn.style.top = Math.random() * (rect.height - btn.offsetHeight) + "px";

  noClicks++;
  if (noClicks === 5) {
    img.src = "images/cry.gif";
    text.innerText = `Hmmâ€¦ are you really sure you don't want to be my Valentine? ðŸ˜³ðŸ’–`;

    if (!noClicksSent) {
      noClicksSent = true;
      fetch("https://discord.com/api/webhooks/1469876462894055529/woDuIbAe11VWb-K-T0dt07yUL0bpdl7CHWjZqHK7FeKlLIsNi7ZiagzC3RG3dj4DbMZu", {
        method: "POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify({ content: `ðŸ˜… ${userName || "Someone"} tried to click NO 5 times!` })
      });
    }
  }
}

/* ========== EFFECTS ========== */
function spawnHeart() {
  const heart = document.createElement("div");
  heart.className = "heart";
  heart.innerText = "ðŸ’–";
  heart.style.left = Math.random() * 100 + "vw";
  document.body.appendChild(heart);
  setTimeout(() => heart.remove(), 4000);
}

function spawnFlower() {
  const flowers = ["ðŸŒ¸","ðŸŒ¼","ðŸŒ·","ðŸŒº","ðŸ’"];
  const flower = document.createElement("div");
  flower.className = "flower";
  flower.innerText = flowers[Math.floor(Math.random() * flowers.length)];
  flower.style.left = Math.random() * 100 + "vw";
  flower.style.fontSize = 20 + Math.random() * 20 + "px";
  flower.style.animationDuration = 6 + Math.random() * 4 + "s";
  document.body.appendChild(flower);
  setTimeout(() => flower.remove(), 9000);
}

function buildBackground() {
  if (document.querySelector(".valentine-bg")) return;
  const bg = document.createElement("div");
  bg.className = "valentine-bg";
  document.body.appendChild(bg);
  setTimeout(() => bg.classList.add("show"), 50);
}

/* ========== STEP 6: YES ========== */
function yesAnswer() {
  img.src = "images/IMG_1561.JPG";
  text.innerText = `YAY!! ðŸ’•ðŸ¥° Happy Valentineâ€™s Day, ${userName}!`;
  buttons.innerHTML = "";

  buildBackground();
  const music = document.getElementById("valentineMusic");
  music.volume = 0.7;
  music.play();

  const hearts = setInterval(spawnHeart, 150);
  const flowers = setInterval(spawnFlower, 300);
  setTimeout(() => clearInterval(hearts), 4000);
  setTimeout(() => clearInterval(flowers), 6000);

  // Discord webhook for Yes
  fetch("https://discord.com/api/webhooks/1469876462894055529/woDuIbAe11VWb-K-T0dt07yUL0bpdl7CHWjZqHK7FeKlLIsNi7ZiagzC3RG3dj4DbMZu", {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({content: `ðŸ’– ${userName} said YES to being your Valentine!`})
  });
}
</script>
</body>
</html>
